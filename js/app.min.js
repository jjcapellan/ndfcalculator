window.onload=function(){exposureApp.initialize()};var exposureInterval,exposureApp={initialize:function(){this.stopsMode=0,this.modesArray=[["Full stops","Half stops","1/3 stops"],[0,2,4]],this.modeIndex=0,this.lb_mode=document.getElementById("lbmode"),this.lb_mode.innerHTML=this.modesArray[0][this.modeIndex],this.remainingTime=0,this.resultInSeconds=0,this.soundIsInitialized=!1,this.speedArray=[["<sup>1</sup>/<sub>8000</sub>","<sup>1</sup>/<sub>4000</sub>","<sup>1</sup>/<sub>2000</sub>","<sup>1</sup>/<sub>1000</sub>","<sup>1</sup>/<sub>500</sub>","<sup>1</sup>/<sub>250</sub>","<sup>1</sup>/<sub>125</sub>","<sup>1</sup>/<sub>60</sub>","<sup>1</sup>/<sub>30</sub>","<sup>1</sup>/<sub>15</sub>","<sup>1</sup>/<sub>8</sub>","<sup>1</sup>/<sub>4</sub>",'0"5','1"','2"','4"','8"','15"','30"',"1min","2min","4min","8min","15min","30min","1h","2h","4h","8h"],[1/8e3,25e-5,5e-4,.001,.002,.004,.008,1/60,1/30,1/15,1/8,.25,.5,1,2,4,8,15,30,60,120,240,480,900,1800,3600,7200,14400,28800],["<sup>1</sup>/<sub>8000</sub>","<sup>1</sup>/<sub>6000</sub>","<sup>1</sup>/<sub>4000</sub>","<sup>1</sup>/<sub>3000</sub>","<sup>1</sup>/<sub>2000</sub>","<sup>1</sup>/<sub>1500</sub>","<sup>1</sup>/<sub>1000</sub>","<sup>1</sup>/<sub>750</sub>","<sup>1</sup>/<sub>500</sub>","<sup>1</sup>/<sub>350</sub>","<sup>1</sup>/<sub>250</sub>","<sup>1</sup>/<sub>180</sub>","<sup>1</sup>/<sub>125</sub>","<sup>1</sup>/<sub>90</sub>","<sup>1</sup>/<sub>60</sub>","<sup>1</sup>/<sub>45</sub>","<sup>1</sup>/<sub>30</sub>","<sup>1</sup>/<sub>20</sub>","<sup>1</sup>/<sub>15</sub>","<sup>1</sup>/<sub>10</sub>","<sup>1</sup>/<sub>8</sub>","<sup>1</sup>/<sub>6</sub>","<sup>1</sup>/<sub>4</sub>",'0"3','0"5','0"7','1"','1"5','2"','3"','4"','6"','8"','10"','15"','20"','30"','45"',"1min","1min 30sec","2min","3min","4min","6min","8min","11min 30sec","15min","22min 30sec","30min","45min","1h","1h 30min","2h","3h","4h","6h","8h"],[1/8e3,1/6e3,25e-5,1/3e3,5e-4,1/1500,.001,1/750,.002,1/350,.004,1/180,.008,1/90,1/60,1/45,1/30,.05,1/15,.1,1/8,1/6,.25,.3,.5,.7,1,1.5,2,3,4,6,8,10,15,20,30,45,60,90,120,180,240,360,480,690,900,1350,1800,2700,3600,5400,7200,10800,14400,21600,28800],["<sup>1</sup>/<sub>8000</sub>","<sup>1</sup>/<sub>6400</sub>","<sup>1</sup>/<sub>5000</sub>","<sup>1</sup>/<sub>4000</sub>","<sup>1</sup>/<sub>3200</sub>","<sup>1</sup>/<sub>2500</sub>","<sup>1</sup>/<sub>2000</sub>","<sup>1</sup>/<sub>1600</sub>","<sup>1</sup>/<sub>1250</sub>","<sup>1</sup>/<sub>1000</sub>","<sup>1</sup>/<sub>800</sub>","<sup>1</sup>/<sub>640</sub>","<sup>1</sup>/<sub>500</sub>","<sup>1</sup>/<sub>400</sub>","<sup>1</sup>/<sub>320</sub>","<sup>1</sup>/<sub>250</sub>","<sup>1</sup>/<sub>200</sub>","<sup>1</sup>/<sub>160</sub>","<sup>1</sup>/<sub>125</sub>","<sup>1</sup>/<sub>100</sub>","<sup>1</sup>/<sub>80</sub>","<sup>1</sup>/<sub>60</sub>","<sup>1</sup>/<sub>50</sub>","<sup>1</sup>/<sub>40</sub>","<sup>1</sup>/<sub>30</sub>","<sup>1</sup>/<sub>25</sub>","<sup>1</sup>/<sub>20</sub>","<sup>1</sup>/<sub>15</sub>","<sup>1</sup>/<sub>13</sub>","<sup>1</sup>/<sub>10</sub>","<sup>1</sup>/<sub>8</sub>","<sup>1</sup>/<sub>6</sub>","<sup>1</sup>/<sub>5</sub>","<sup>1</sup>/<sub>4</sub>",'0"3','0"4','0"5','0"6','0"8','1"','1"3','1"6','2"','2"5','3"2','4"','5"','6"','8"','10"','13"','15"','20"','25"','30"','40"','50"',"1min","1min 20sec","1min 40sec","2min","2min 40sec","3min 20sec","4min","5min 20sec","6min 40sec","8min","10min 20sec","12min 40sec","15min","20min","25min","30min","40min","50min","1h","1h 20min","1h 40min","2h","2h 40min","3h 20min","4h","5h 20min","6h 40min","8h"],[1/8e3,1/6400,2e-4,25e-5,1/3200,4e-4,5e-4,625e-6,8e-4,.001,1/800,1/640,.002,.0025,1/320,.004,.005,1/160,.008,.01,1/80,1/60,.02,.025,1/30,.04,.05,1/15,1/13,.1,1/8,1/6,.2,.25,.3,.4,.5,.6,.8,1,1.3,1.6,2,2.5,3.2,4,5,6,8,10,13,15,20,25,30,40,50,60,80,100,120,160,200,240,320,400,480,620,760,900,1200,1500,1800,2400,3e3,3600,4800,6e3,7200,9600,12e3,14400,19200,24e3,28800]],this.lb_speed=document.getElementById("lbspeed"),this.speedIndex=5,this.maxIndexSpeed=18,this.lb_speed.innerHTML=this.speedArray[0][this.speedIndex],this.filterArray=[["ND2 0.3 1-stop","ND4 0.6 2-stop","ND8 0.9 3-stop","ND16 1.2 4-stop","ND32 1.5 5-stop","ND64 1.8 6-stop","ND128 2.1 7-stop","ND256 2.4 8-stop","ND400 2.6 8.6-stop","ND512 2.7 9-stop","ND1024 3.0 10-stop"],[.3,.6,.9,1.2,1.5,1.8,2.1,2.4,2.6,2.7,3]],this.lb_filter=document.getElementById("lbfilter"),this.filterIndex=5,this.maxIndexFilter=10,this.lb_filter.innerHTML=this.filterArray[0][this.filterIndex],this.div_result=document.getElementById("ExposureTime"),this.p_result=document.getElementById("p_result"),this.div_speedSelector=document.getElementById("speedSelector"),this.div_filterSelector=document.getElementById("filterSelector"),this.div_speedMode=document.getElementById("speedMode"),this.snd_countend=document.getElementById("snd_countend"),this.div_speedSelector.addEventListener("touchstart",this.onDownSpeed.bind(this),!1),this.div_speedSelector.addEventListener("mousedown",this.onDownSpeed.bind(this),!1),this.div_speedSelector.addEventListener("touchend",this.onUp.bind(this),!1),this.div_speedSelector.addEventListener("mouseup",this.onUp.bind(this),!1),this.div_speedSelector.addEventListener("touchmove",this.onMove.bind(this),!1),this.div_filterSelector.addEventListener("touchstart",this.onDownFilter.bind(this),!1),this.div_filterSelector.addEventListener("mousedown",this.onDownFilter.bind(this),!1),this.div_filterSelector.addEventListener("touchend",this.onUp.bind(this),!1),this.div_filterSelector.addEventListener("mouseup",this.onUp.bind(this),!1),this.div_filterSelector.addEventListener("touchmove",this.onMove.bind(this),!1),this.div_speedMode.addEventListener("touchstart",this.onDownMode.bind(this),!1),this.div_speedMode.addEventListener("mousedown",this.onDownMode.bind(this),!1),this.div_speedMode.addEventListener("touchend",this.onUp.bind(this),!1),this.div_speedMode.addEventListener("mouseup",this.onUp.bind(this),!1),this.div_speedMode.addEventListener("touchmove",this.onMove.bind(this),!1),this.div_result.addEventListener("mousedown",this.activateCounter.bind(this),!1),this.swipeXstart=0,this.swipeXend=0,this.swipMode="speed",this.counterIsactive=!1,this.printResult()},onDownSpeed:function(s){this.swipMode="speed","touchstart"==s.type?this.swipeXstart=s.touches[0].clientX:this.swipeXstart=s.clientX},onDownFilter:function(s){this.swipMode="filter","touchstart"==s.type?this.swipeXstart=s.touches[0].clientX:this.swipeXstart=s.clientX},onDownMode:function(s){this.swipMode="mode","touchstart"==s.type?this.swipeXstart=s.touches[0].clientX:this.swipeXstart=s.clientX},onUp:function(s){"touchend"==s.type?this.swipeXend=s.changedTouches[0].clientX:this.swipeXend=s.clientX,Math.abs(this.swipeXstart-this.swipeXend)>40&&("speed"==this.swipMode?this.swipeXstart>this.swipeXend?this.btSpeedUp():this.btSpeedDown():"filter"==this.swipMode?this.swipeXstart>this.swipeXend?this.btFilterUp():this.btFilterDown():"mode"==this.swipMode&&(this.swipeXstart>this.swipeXend?(this.modeIndex++,this.modeIndex>2&&(this.modeIndex=2),this.resetMode(this.modesArray[1][this.modeIndex])):(this.modeIndex--,this.modeIndex<0&&(this.modeIndex=0),this.resetMode(this.modesArray[1][this.modeIndex]))))},btSpeedUp:function(){var s=this;this.speedIndex++,this.speedIndex>this.maxIndexSpeed&&(this.speedIndex=this.maxIndexSpeed),this.lb_speed.innerHTML=this.speedArray[this.stopsMode][this.speedIndex],this.lb_speed.style.fontSize="1.3em",setTimeout(function(){s.lb_speed.style.fontSize="1em"},200),this.printResult()},btSpeedDown:function(){var s=this;this.speedIndex--,this.speedIndex<0&&(this.speedIndex=0),this.lb_speed.innerHTML=this.speedArray[this.stopsMode][this.speedIndex],this.lb_speed.style.fontSize="1.3em",setTimeout(function(){s.lb_speed.style.fontSize="1em"},200),this.printResult()},btFilterUp:function(){var s=this;this.filterIndex++,this.filterIndex>this.maxIndexFilter&&(this.filterIndex=this.maxIndexFilter),this.lb_filter.innerHTML=this.filterArray[0][this.filterIndex],this.lb_filter.style.fontSize="1.1em",setTimeout(function(){s.lb_filter.style.fontSize="1em"},200),this.printResult()},btFilterDown:function(){var s=this;this.filterIndex--,this.filterIndex<0&&(this.filterIndex=0),this.lb_filter.innerHTML=this.filterArray[0][this.filterIndex],this.lb_filter.style.fontSize="1.1em",setTimeout(function(){s.lb_filter.style.fontSize="1em"},200),this.printResult()},onMove:function(s){s.preventDefault()},printResult:function(){function s(){var s=t.speedArray[t.stopsMode+1][t.speedIndex],e=t.filterArray[1][t.filterIndex];return s*Math.pow(10,e)}function e(s){var e=28800,i=1,u=0,n=12;if(s>=28800)return t.resultInSeconds=28800,"8h";for(;u<2e3;){var d=Math.abs(t.speedArray[t.stopsMode+1][n]-s);if(d<e&&(e=d,n+=i),d>e){if(!(i>0))return t.resultInSeconds=t.speedArray[t.stopsMode+1][n+i*-1],t.speedArray[t.stopsMode][n+i*-1];e=d,i*=-1,n+=i}u++}console.log("Error: exit from infinite loop")}var t=this;this.p_result.innerHTML=e(s()),this.div_result.style.background="radial-gradient( #eea5a2, #3f3658)",setTimeout(function(){t.div_result.style.background="radial-gradient( #9b2f2f, #3f3658)"},200)},resetMode:function(s){switch(s){case 0:this.lb_mode.innerHTML=this.modesArray[0][0],this.stopsMode=0,this.speedIndex=5,this.maxIndexSpeed=18,this.lb_speed.innerHTML=this.speedArray[this.stopsMode][this.speedIndex],this.printResult();break;case 2:this.lb_mode.innerHTML=this.modesArray[0][1],this.stopsMode=2,this.speedIndex=10,this.maxIndexSpeed=36,this.lb_speed.innerHTML=this.speedArray[this.stopsMode][this.speedIndex],this.printResult();break;case 4:this.lb_mode.innerHTML=this.modesArray[0][2],this.stopsMode=4,this.speedIndex=15,this.maxIndexSpeed=54,this.lb_speed.innerHTML=this.speedArray[this.stopsMode][this.speedIndex],this.printResult()}},secondsTohms:function(s){var e,t,i;return e=parseInt(s/3600),t=parseInt(s%3600/60),i=s%60,e=e<10?"0"+e:e,t=t<10?"0"+t:t,i=i<10?"0"+i:i,e+":"+t+":"+i},activateCounter:function(){var s=this;this.soundIsInitialized||(this.snd_countend.volume="0",this.snd_countend.play(),this.soundIsInitialized=!0),this.resultInSeconds>2&&(this.counterIsactive?(void 0!=exposureInterval&&clearInterval(exposureInterval),this.counterIsactive=!1,this.printResult()):(this.counterIsactive=!0,this.remainingTime=this.resultInSeconds,this.p_result.innerHTML=this.secondsTohms(this.remainingTime),this.remainingTime--,exposureInterval=setInterval(function(){s.p_result.innerHTML=s.secondsTohms(s.remainingTime),s.remainingTime--,s.remainingTime<0&&(s.snd_countend.volume="1",s.snd_countend.play(),clearInterval(exposureInterval))},1e3)))}};